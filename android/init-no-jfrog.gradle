// Init script to prevent JFrog buildinfo dependency resolution issues
allprojects {
    configurations.all {
        resolutionStrategy {
            eachDependency { DependencyResolveDetails details ->
                if (details.requested.group == 'org.jfrog.buildinfo') {
                    // Replace JFrog buildinfo with a dummy dependency that exists
                    details.useTarget 'org.apache.commons:commons-lang3:3.12.0'
                    details.because 'JFrog buildinfo causes EAS build cache timeout issues'
                }
            }
        }
        
        // Exclude at configuration level
        exclude group: 'org.jfrog.buildinfo'
        exclude module: 'build-info-extractor-gradle'
    }
}

// Additional exclusions for specific configurations
gradle.allprojects { project ->
    project.configurations.configureEach { config ->
        config.exclude group: 'org.jfrog.buildinfo'
    }
}